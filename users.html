

<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Login / Sign Up Form</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="users.css">

</head>
<body>
    
    <div class="bg">
        <nav>
          <a href="./index.html">Home</a>
          
        </nav>
    </div>

    <div class="container">
        <form class="form" id="login">
            <h1 class="form__title">Login</h1>
            <!--div class="form__message form__message--error"></div-->

            <div class="form__input-group">
                <input type="text" id="email" class="form__input" autofocus placeholder="Email">
                <div class="form__input-error-message"></div>
            </div>

            <div class="form__input-group">
                <input type="password" id="password" class="form__input" autofocus placeholder="Password">
            <!--div class="form__input-error-message"></div-->
            </div>
            <button class="form__button" id="sub_btn" type="submit">Continue</button>
            <!--p class="form__text">
                <a href="#" class="form__link">Forgot your password?</a>
            </p-->
            <p class="form__text">
                <a class="form__link" href="./users_register.html" id="linkCreateAccount">Don't have an account? Create account</a>
            </p>
        </form>
        
        <script type="module">

            import {initializeApp} from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
            
            const firebaseConfig = {
                apiKey: "AIzaSyCIh3WM3toVto_pPrnP7VSQAzFZg1qXGvo",
                authDomain: "car-wash-baef3.firebaseapp.com",
                projectId: "car-wash-baef3",
                storageBucket: "car-wash-baef3.appspot.com",
                messagingSenderId: "314232474215",
                appId: "1:314232474215:web:f593d7c9c6239b4d3ea2c2"
            };
    
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
    
            import  {getDatabase, ref, set, child, get} from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
    
            const db= getDatabase();

            const email = document.getElementById('email');
            const password = document.getElementById('password');
            const submit = document.getElementById('sub_btn');

            function Authenticate(){
                const dbref=ref(db);

                get(child(dbref,"UserList/"+full_name.value)).then((snapshot)=>{
                if(snapshot.exists()){
                    let bdpass= decPass(snapshot.val().password );
                    if (dbpass == pass.value){
                        alert("You are logged-In");
                    }

                    else {
                        alert ("User does not exist");

                    }
                }
                else{
                    alert("Username or Password is invalid");
                }
            });
            }
    
    
            function decPass(dbpass){
                var pass12=CryptoJS.AES.decrypt(dbpass,pass.value);
                return pass12.toString(CryptoJS.enc.Utf8);
            }


            

        </script>
    


    </div>
    


</body>
